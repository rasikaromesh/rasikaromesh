(this["webpackJsonpromeshdhananjaya.com"]=this["webpackJsonpromeshdhananjaya.com"]||[]).push([[0],{48:function(e,t,r){},49:function(e,t,r){},55:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){},71:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(27),c=r.n(i),s=(r(48),r(86)),o=r(87),l=(r(49),r(84)),d=r(85),p=r(1);function h(){return Object(p.jsxs)("div",{className:"socialButton",children:[Object(p.jsx)("a",{href:"https://www.linkedin.com/in/romeshdhananjaya/",target:"_blank",rel:"noreferrer noopener",children:Object(p.jsx)("span",{children:Object(p.jsx)(l.a,{})})}),Object(p.jsx)("a",{href:"https://twitter.com/RskRoma",target:"_blank",rel:"noreferrer noopener",children:Object(p.jsx)("span",{children:Object(p.jsx)(d.a,{})})})]})}function y(){return Object(p.jsx)("div",{className:"topbar ",children:Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsxs)("div",{className:"left",children:[Object(p.jsx)("a",{href:"/",className:"logo",children:"Romesh Dhananjaya"}),Object(p.jsxs)("div",{className:"itemContainer",children:[Object(p.jsx)(s.a,{className:"icon"}),Object(p.jsx)("span",{children:"+65 81226123"})]}),Object(p.jsxs)("div",{className:"itemContainer",children:[Object(p.jsx)(o.a,{className:"icon"}),Object(p.jsx)("span",{children:"romesh.d.sg@gmail.com"})]})]}),Object(p.jsx)("div",{className:"right",children:Object(p.jsx)("div",{children:Object(p.jsx)(h,{})})})]})})}r(55);var j=[{id:1,date:{year:"2021",month:"September",day:"10"},title:"How to retry on service when failure happens.",body:[{type:"paragraph",text:"We can find many use cases where we need to retry on some services or APIs when there is an error in the api. It might be a network failure or any application failure. So today I am going to explain a way to retry with a Java Spring application."},{type:"paragraph",text:"Before everything we need to initialize a Java spring project and for that I am going to use Spring Initializer(https://start.spring.io/). If you need to know more about generating projects with Spring initializer please check this link."},{type:"paragraph",text:"Of course then we need to add a couple dependencies to the pom.xml file."},{type:"paragraph",text:"This is for the retry."},{type:"code",text:"\n<dependency>\n  <groupId>org.springframework.retry</groupId>\n  <artifactId>spring-retry</artifactId>\n  <version>1.2.5.RELEASE</version>\n</dependency>"},{type:"paragraph",text:"And this is to add Spring AOP."},{type:"code",text:"\n<dependency>\n  <groupId>org.springframework</groupId>\n  <artifactId>spring-aspects</artifactId>\n  <version>5.2.8.RELEASE</version>\n</dependency>"},{type:"paragraph",text:"Next We need to create a configuration class and later we use this to create the RetryTemplate bean. Let\u2019s name this class as RetryConfig. \n      We have to annotate this call with @Configuration and @EnableRetry annotations."},{type:"code",text:'@Configuration\n      @EnableRetry\n      @ConfigurationProperties("retry-config")\n      public class RetryConfig {\n      }'},{type:"paragraph",text:"Our next step would be defining the bean. So Let\u2019s create a method for that and I am giving the name retryTemplate. This method should return a RetryTemplate object."},{type:"code",text:"@Bean\n  public RetryTemplate retryTemplate() {\n}"},{type:"paragraph",text:"Then we need to create a BackOffPolicy and a RetryPolicy. With BackOffPolicy we can decide the wait time before the next retry. \n      When creating a BackOffPolicy we need to provide a backoff period in milliseconds as long value and the default value is 1000l (1000 millisecond). \n      There are different types of BackOffPolicies and for simplicity let\u2019s use FixedBackOffPolicy for this and which will fix the amount of time that we are providing before the retry."},{type:"paragraph",text:"So here\u2019s how we do it."},{type:"code",text:"FixedBackOffPolicy backOffPolicy = new FixedBackOffPolicy();\n      backOffPolicy.setBackOffPeriod(5000l); // 5 second wait"},{type:"paragraph",text:"The next part is RetryPolicy. In Spring Boot there are multiple RetryPolicy classes, designed for different use cases. \n      (AlwaysRetryPolicy, CircuitBreakerRetryPolicy, CompositeRetryPolicy, ExceptionClassifierRetryPolicy, ExperssionRetryPolicy, NeverRetryPolicy, SimpleRetryPolicy, TimeoutRetryPolocy)"},{type:"paragraph",text:"For this code I am going to use SimpleRetryPolicy."},{type:"code",text:"SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy();\nretryPolicy.setMaxAttempts(2);\nretryTemplate.setRetryPolicy(retryPolicy);"},{type:"paragraph",text:"MaxAttemps value will define the number of retries. In this example if it fails the first time this will retry two more times."},{type:"paragraph",text:"Then we can use this retryTemplate bean where we need to retry. Let\u2019s assume we have a service called TestService and it has a method called callApi(). \n      So here\u2019s how we can use retryTemplate."},{type:"code",text:"@Component\npublic class Test {\n    @Autowired\n    TestService testService;\n\n    @Autowired\n    RetryTemplate retryTemplate;\n\n    public void invokeService(){\n        retryTemplate.execute(arg0 -> {\n            testService.callApi();\n            return null;\n        });\n    }\n}\n      "},{type:"paragraph",text:"You can find below complete RetryTemplateConfiguration class"},{type:"code",text:"@Configuration\n@EnableRetry\npublic class RetryConfig {\n    @Bean\n    public RetryTemplate retryTemplate() {\n        RetryTemplate retryTemplate = new RetryTemplate();\n\n        FixedBackOffPolicy fixedBackOffPolicy = new FixedBackOffPolicy();\n        fixedBackOffPolicy.setBackOffPeriod(5000l);// 5 second wait\n        retryTemplate.setBackOffPolicy(fixedBackOffPolicy);\n\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy();\n        retryPolicy.setMaxAttempts(2);\n        retryTemplate.setRetryPolicy(retryPolicy);\n\n        return retryTemplate;\n    }\n}\n  "}],summery:"We can find many use cases where we need to retry on some services or APIs when there is an error in the api. It might be a network failure or any application failure. So here is the way",tags:["Java","SpringBoot"]}],m=r(3),f=r(24);function u(){var e=Object(m.g)().id,t=j[e-1];return Object(p.jsxs)("div",{className:"blog-post",children:[Object(p.jsx)("div",{className:"image",children:Object(p.jsx)("img",{src:"https://picsum.photos/400",alt:""})}),Object(p.jsx)("div",{className:"title",children:t.title}),Object(p.jsx)("div",{className:"body",children:t.body.map((function(e){return function(e){var t=e.type,r=e.text;return"code"===t?Object(p.jsx)("div",{className:"code",children:Object(p.jsx)(f.a,{text:r,theme:f.b,language:"java",codeBlock:!0})}):Object(p.jsx)("p",{className:"paragraph",children:r})}(e)}))})]})}r(65);var b=r(38);function x(){var e=Object(n.useRef)();return Object(n.useEffect)((function(){Object(b.a)(e.current,{showCursor:!0,backDelay:1500,backSpeed:60,strings:["Developer","Designer","Blogger"]})}),[]),Object(p.jsxs)("div",{className:"intro",id:"intro",children:[Object(p.jsx)("div",{className:"imageContainer",children:Object(p.jsx)("img",{src:window.location.origin+"/assets/ProPic.jpeg",alt:""})}),Object(p.jsx)("div",{className:"hi",children:"Hi."}),Object(p.jsx)("div",{className:"hiShadow"}),Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)("h2",{children:"I am Romesh Dhananjaya"}),Object(p.jsxs)("h3",{children:["I am a ",Object(p.jsx)("span",{ref:e})]})]})]})}r(66),r(67);function O(e){var t=e.children;return Object(p.jsx)("div",{className:"tag",children:t})}function g(e){var t=e.date,r=e.title,n=e.summery,a=e.tags,i=e.onClick,c=function(){i()};return Object(p.jsxs)("div",{className:"blog-post-card",children:[Object(p.jsxs)("div",{className:"left",onClick:c,children:[Object(p.jsx)("span",{className:"year",children:t.year}),Object(p.jsx)("span",{className:"day",children:t.day}),Object(p.jsx)("span",{className:"month",children:t.month})]}),Object(p.jsxs)("div",{className:"right",children:[Object(p.jsx)("div",{className:"title",onClick:c,children:r}),Object(p.jsx)("div",{className:"summery",onClick:c,children:n}),Object(p.jsx)("div",{className:"tags",children:a.map((function(e){return Object(p.jsx)(O,{children:e},e)}))})]})]})}function v(){var e=Object(m.f)();return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Blog"}),j.map((function(t){return Object(p.jsx)(g,{onClick:function(){return r=t.id,void e.push("/post/".concat(r));var r},date:t.date,title:t.title,summery:t.summery,tags:t.tags},t.id)}))]})}function w(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{}),Object(p.jsx)("div",{className:"cardWrapper",children:Object(p.jsx)(v,{})})]})}r(68);function P(){return Object(p.jsx)("div",{className:"footer",children:Object(p.jsx)("p",{className:"copyright",children:"\xa9 Romesh Dhananjaya, romeshdhananjaya.com All rights reserved"})})}var k,R,N=r(23),T=r.n(N),S=r(39),B=(r(69),["title","titleId"]);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function E(e,t){var r=e.title,a=e.titleId,i=C(e,B);return n.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,k||(k=n.createElement("g",null,n.createElement("rect",{fill:"none",height:24,width:24}))),R||(R=n.createElement("g",null,n.createElement("path",{d:"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z"}))))}var A=n.forwardRef(E),L=(r.p,function(){var e=function(){var e=Object(S.a)(T.a.mark((function e(){var t,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,console.log(t),"Title is null",(r=document.createElement("a")).download="Title is null.json",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"editor-wrapper",children:Object(p.jsx)("span",{onClick:e,className:"download-icon",children:Object(p.jsx)(A,{})})})}),W=r(40);r(70);var D=function(){return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)(y,{}),Object(p.jsxs)("div",{className:"section",children:[Object(p.jsx)(W.a,{children:Object(p.jsxs)(m.c,{children:[Object(p.jsx)(m.a,{path:"/editor",children:Object(p.jsx)(L,{})}),Object(p.jsx)(m.a,{path:"/post/:id",children:Object(p.jsx)(u,{})}),Object(p.jsx)(m.a,{exact:!0,path:"/",children:Object(p.jsx)(w,{})})]})}),Object(p.jsx)(P,{})]})]})};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))}},[[71,152,153]]]);
//# sourceMappingURL=main.47154302.chunk.js.map